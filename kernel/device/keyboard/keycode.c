/**-----------------------------------------------------------------------------

 @file    ascii.c
 @brief   Definition of keyboard's ascii code
 @details
 @verbatim

  Because this file will not be modified very often, it is separated into one
  C file.

 @endverbatim
  Ref: https://wiki.osdev.org/PS2_Keyboard

 **-----------------------------------------------------------------------------
 */
#include <stdint.h>
#include <stdbool.h>

static char key_ascii[][2] = {
  { 0, 0 },      { 27, 0 },    { '1', '!' }, { '2', '@' },  { '3', '#' },
  { '4', '$' },  { '5', '%' }, { '6', '^' }, { '7', '&' },  { '8', '*' },
  { '9', '(' },  { '0', ')' }, { '-', '_' }, { '=', '+' },  { '\b', 0 },
  { '\t', 0 },   { 'q', 'Q' }, { 'w', 'W' }, { 'e', 'E' },   { 'r', 'R' },
  { 't', 'T' },  { 'y', 'Y' }, { 'u', 'U' }, { 'i', 'I' },  { 'o', 'O' },
  { 'p', 'P' },  { '[', '{' }, { ']', '}' }, { '\n', 0 },   { 0, 0 },
  { 'a', 'A' },  { 's', 'S' }, { 'd', 'D' }, { 'f', 'F' },  { 'g', 'G' },
  { 'h', 'H' },  { 'j', 'J' }, { 'k', 'K' }, { 'l', 'L' },  { ';', ':' },
  { '\'', '"'},  { '`', '~' }, { 0, 0 },     { '\\', '|'},  { 'z', 'Z' },
  { 'x', 'X' },  { 'c', 'C' }, { 'v', 'V' }, { 'b', 'B' },  { 'n', 'N' },
  { 'm', 'M' },  { ',', '<' }, { '.', '>' }, { '/', '?' },  { 0, 0 },
  { '*', 0 },    { 0, 0 },     { ' ', 0 },   { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { '-', 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { '+', 0 },    { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },     { 0, 0 },      { 0, 0 },
  { 0, 0 },      { 0, 0 },     { 0, 0 },
};

char keyboard_get_ascii(uint8_t scancode, bool shift, bool caps_lock)
{
    if ((caps_lock || shift) && key_ascii[scancode][1]) {
        return key_ascii[scancode][1];
    }

    return key_ascii[scancode][0];
}


